flowchart TD
  User((User)) -->|Sign in| NextAuth[NextAuth Google]
  User -->|Upload PDF/Image/Text| UploadUI[UploadCard]
  UploadUI --> AnalyzeAPI[/api/analyze]
  AnalyzeAPI --> Extract[PDF/OCR Extraction]
  AnalyzeAPI --> MongoAttempts[(attempts)]
  AnalyzeAPI --> MongoRecs[(recommendations)]

  User --> Dashboard[/app Dashboard]
  Dashboard --> ProgressAPI[/api/progress]
  Dashboard --> EventsAPI[/api/events]
  Dashboard --> NudgesAPI[/api/nudges]

  ProgressAPI --> MongoProgress[(progress_events)]
  EventsAPI --> MongoEvents[(events)]

  User --> History[/history]
  History --> HistoryAPI[/api/history]
  HistoryAPI --> MongoAttempts
  HistoryAPI --> MongoRecs

  User --> Account[/account]
  Account --> UserAPI[/api/user]
  Account --> ExportAPI[/api/account/export]
  Account --> DeleteAPI[/api/account/delete]
  UserAPI --> MongoUsers[(users)]
  ExportAPI --> MongoUsers
  DeleteAPI --> MongoUsers
